<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype Digital - Ultra Realistic Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background-color: #0f172a;
            background-image: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), radial-gradient(at 100% 100%, hsla(225,39%,30%,1) 0, transparent 50%);
            min-height: 100vh; color: white; overflow-x: hidden;
        }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .hidden-element { display: none !important; }
        
        /* Spinner & Progress */
        .loader { border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid #3b82f6; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .active-tab { background: rgba(59, 130, 246, 0.2); border-color: #3b82f6; }
        .animate-pop { animation: pop 0.4s ease-out; }
        @keyframes pop { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    </style>
</head>
<body class="font-sans antialiased" onload="checkSession()">

    <div id="loadingOverlay" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-slate-950/95 backdrop-blur-xl hidden-element">
        <div class="loader mb-4"></div>
        <p id="loadingStatus" class="text-blue-400 font-bold tracking-[0.3em] text-[10px] uppercase">Authenticating...</p>
        <div class="w-48 h-1 bg-white/10 rounded-full mt-4 overflow-hidden">
            <div id="progressBar" class="h-full bg-blue-600 transition-all duration-500" style="width: 0%"></div>
        </div>
    </div>

    <div id="welcomeOverlay" class="fixed inset-0 z-50 flex items-center justify-center bg-slate-950 transition-all duration-700">
        <div class="text-center p-8 max-w-lg">
            <div class="w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl">
                <i class="fa-solid fa-key text-3xl text-white"></i>
            </div>
            <h2 class="text-4xl font-black mb-4 tracking-tighter uppercase">DigiPay Proto</h2>
            <p class="text-gray-400 mb-10 text-sm">Aplikasi Simulasi Transaksi Generasi Terbaru</p>
            <button onclick="showLoginModal()" class="bg-blue-600 text-white px-12 py-4 rounded-2xl font-black shadow-xl hover:bg-blue-500 transition-all uppercase text-[10px] tracking-[0.2em]">Mulai Simulasi</button>
        </div>
    </div>

    <div id="loginModal" class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-md hidden-element">
        <div id="loginSelection" class="glass w-full max-w-sm p-10 rounded-[3rem] border border-white/10 animate-pop">
            <h3 class="text-xl font-black text-center mb-8 tracking-widest uppercase">Sign In</h3>
            <div class="space-y-4">
                <button onclick="goToForm('Google')" class="w-full flex items-center gap-4 bg-white/5 border border-white/10 p-4 rounded-2xl hover:bg-white/10 transition">
                    <img src="https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png" class="w-6 h-6">
                    <span class="text-[10px] font-black uppercase tracking-widest">Sign in with Google</span>
                </button>
                <button onclick="goToForm('Facebook')" class="w-full flex items-center gap-4 bg-blue-600/10 border border-blue-600/20 p-4 rounded-2xl hover:bg-blue-600/20 transition">
                    <i class="fa-brands fa-facebook text-blue-500 text-2xl"></i>
                    <span class="text-[10px] font-black uppercase tracking-widest">Sign in with Facebook</span>
                </button>
            </div>
        </div>

        <div id="loginForm" class="glass w-full max-w-sm p-10 rounded-[3rem] border border-white/10 hidden-element animate-pop">
            <div class="text-center mb-8">
                <img id="formIcon" src="" class="w-12 h-12 mx-auto mb-4 hidden-element">
                <i id="formIconFb" class="fa-brands fa-facebook text-blue-500 text-4xl mb-4 hidden-element"></i>
                <h3 id="formTitle" class="text-lg font-black uppercase tracking-widest">Login</h3>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-2 block">Email atau Ponsel</label>
                    <input type="text" id="fakeEmail" placeholder="demo@example.com" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm outline-none focus:border-blue-500 transition">
                </div>
                <div>
                    <label class="text-[9px] font-bold text-gray-500 uppercase mb-2 block">Kata Sandi</label>
                    <input type="password" id="fakePass" value="**********" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm outline-none focus:border-blue-500 transition">
                </div>
                <button onclick="startVerification()" class="w-full bg-blue-600 py-4 rounded-xl font-black uppercase text-[10px] tracking-widest mt-4">Masuk Sekarang</button>
            </div>
            <button onclick="backToSelection()" class="w-full mt-6 text-gray-600 text-[9px] font-bold uppercase tracking-widest">Ganti Metode</button>
        </div>
    </div>

    <div id="mainContent" class="hidden-element">
        <nav class="sticky top-0 z-40 border-b border-white/10 glass px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-black italic tracking-tighter uppercase"><span class="text-blue-500">DIGI</span>PAY</h1>
            <div class="flex items-center gap-4">
                <div class="text-right mr-2">
                    <p id="userEmailDisplay" class="text-[9px] text-gray-400 lowercase italic">user@email.com</p>
                    <p id="userNameDisplay" class="text-[10px] font-black text-blue-400 uppercase tracking-widest"></p>
                </div>
                <button onclick="simulateLogout()" class="w-10 h-10 rounded-xl bg-red-500/10 text-red-500 flex items-center justify-center hover:bg-red-500 hover:text-white transition-all">
                    <i class="fa-solid fa-power-off text-sm"></i>
                </button>
            </div>
        </nav>

        <main class="container mx-auto px-6 py-10 grid lg:grid-cols-2 gap-10">
            <div class="glass p-8 rounded-[2.5rem] border border-white/10">
                <div class="flex gap-2 p-1.5 glass rounded-2xl mb-8">
                    <button onclick="switchService(this, 'pulsa')" class="service-tab active-tab flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest">PULSA</button>
                    <button onclick="switchService(this, 'data')" class="service-tab flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest text-gray-500">PAKET DATA</button>
                </div>
                <input type="number" id="phoneInput" placeholder="08xxxxxxxxxx" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-5 text-white text-2xl outline-none focus:ring-2 focus:ring-blue-500 mb-6">
                <div id="nominalGrid" class="grid grid-cols-2 gap-4 mb-10 max-h-[250px] overflow-y-auto no-scrollbar"></div>
                <button onclick="handlePay()" class="w-full bg-blue-600 py-5 rounded-2xl font-black uppercase text-[10px] tracking-widest">Konfirmasi Pembayaran</button>
            </div>

            <div class="glass p-8 rounded-[2.5rem] border border-white/10">
                <h3 class="text-[10px] font-black text-blue-400 tracking-[0.3em] uppercase mb-8">Riwayat Transaksi</h3>
                <div id="logContainer" class="space-y-4"></div>
            </div>
        </main>
    </div>

    <script>
        let currentProvider = "";

        // Fungsi Alur Login yang diminta
        function showLoginModal() { document.getElementById('loginModal').classList.remove('hidden-element'); }

        function goToForm(provider) {
            currentProvider = provider;
            document.getElementById('loginSelection').classList.add('hidden-element');
            document.getElementById('loginForm').classList.remove('hidden-element');
            
            const iconG = document.getElementById('formIcon');
            const iconF = document.getElementById('formIconFb');
            
            if(provider === 'Google') {
                iconG.src = "https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png";
                iconG.classList.remove('hidden-element');
                iconF.classList.add('hidden-element');
                document.getElementById('formTitle').innerText = "Google Login";
            } else {
                iconF.classList.remove('hidden-element');
                iconG.classList.add('hidden-element');
                document.getElementById('formTitle').innerText = "Facebook Login";
            }
        }

        function backToSelection() {
            document.getElementById('loginForm').classList.add('hidden-element');
            document.getElementById('loginSelection').classList.remove('hidden-element');
        }

        function startVerification() {
            const email = document.getElementById('fakeEmail').value || "demo.user@email.com";
            document.getElementById('loginModal').classList.add('hidden-element');
            document.getElementById('loadingOverlay').classList.remove('hidden-element');
            
            const status = document.getElementById('loadingStatus');
            const bar = document.getElementById('progressBar');
            
            // Tahap 1
            setTimeout(() => { status.innerText = "Securing Connection..."; bar.style.width = "30%"; }, 800);
            // Tahap 2
            setTimeout(() => { status.innerText = "Verifying Credentials..."; bar.style.width = "65%"; }, 1800);
            // Tahap 3
            setTimeout(() => { status.innerText = "Redirecting to Dashboard..."; bar.style.width = "100%"; }, 2800);

            setTimeout(() => {
                localStorage.setItem('proto_user_name', currentProvider + " User");
                localStorage.setItem('proto_user_email', email);
                document.getElementById('loadingOverlay').classList.add('hidden-element');
                checkSession();
            }, 3500);
        }

        // Logic Dashboard & History
        function checkSession() {
            const user = localStorage.getItem('proto_user_name');
            if (user) {
                document.getElementById('welcomeOverlay').classList.add('hidden-element');
                document.getElementById('mainContent').classList.remove('hidden-element');
                document.getElementById('userNameDisplay').innerText = user;
                document.getElementById('userEmailDisplay').innerText = localStorage.getItem('proto_user_email');
                renderNominals('pulsa');
                renderHistory();
            }
        }

        function switchService(btn, type) {
            document.querySelectorAll('.service-tab').forEach(t => { t.classList.remove('active-tab', 'text-white'); t.classList.add('text-gray-500'); });
            btn.classList.add('active-tab', 'text-white');
            renderNominals(type);
        }

        function renderNominals(type) {
            const items = type === 'pulsa' ? 
                ['5K', '10K', '20K', '50K', '100K', '200K'] : 
                ['1GB', '5GB', '10GB', '30GB', 'UNLIMITED'];
            
            document.getElementById('nominalGrid').innerHTML = items.map(val => `
                <div onclick="selectProduct(this, '${val}')" class="product-item glass p-5 rounded-2xl cursor-pointer border border-white/5 hover:border-blue-500 transition-all text-center">
                    <p class="font-black text-xl uppercase">${val}</p>
                    <p class="text-blue-500 text-[8px] font-black uppercase mt-1">Simulasi Produk</p>
                </div>
            `).join('');
        }

        function selectProduct(el, val) {
            document.querySelectorAll('.product-item').forEach(i => i.classList.remove('border-blue-500', 'bg-blue-600/10'));
            el.classList.add('border-blue-500', 'bg-blue-600/10');
            window.lastSelected = val;
        }

        function handlePay() {
            const phone = document.getElementById('phoneInput').value;
            if(!phone || !window.lastSelected) return alert("Nomor HP dan Produk harus dipilih!");
            
            const trx = {
                id: 'INV' + Math.floor(Math.random()*9000),
                phone, val: window.lastSelected,
                time: new Date().toLocaleTimeString()
            };
            let logs = JSON.parse(localStorage.getItem('logs')) || [];
            logs.unshift(trx);
            localStorage.setItem('logs', JSON.stringify(logs));
            renderHistory();
            alert("Transaksi Berhasil!");
        }

        function renderHistory() {
            const logs = JSON.parse(localStorage.getItem('logs')) || [];
            document.getElementById('logContainer').innerHTML = logs.map(l => `
                <div class="glass p-4 rounded-2xl border-white/5 flex justify-between items-center animate-pop">
                    <div>
                        <p class="text-[7px] font-black text-blue-500 uppercase">${l.id}</p>
                        <p class="text-xs text-gray-400">${l.phone}</p>
                        <p class="text-md font-black uppercase">${l.val}</p>
                    </div>
                    <p class="text-[9px] text-gray-500 font-bold">${l.time}</p>
                </div>
            `).join('');
        }

        function simulateLogout() { localStorage.clear(); location.reload(); }
    </script>
</body>
</html>
