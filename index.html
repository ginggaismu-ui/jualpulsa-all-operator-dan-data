<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prototype Digital - Official Simulator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background-color: #0f172a;
            background-image: radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), radial-gradient(at 100% 100%, hsla(225,39%,30%,1) 0, transparent 50%);
            min-height: 100vh; color: white; overflow-x: hidden;
        }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .hidden-element { display: none !important; }
        .loader { border: 3px solid rgba(255,255,255,0.1); border-top: 3px solid #3b82f6; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .active-tab { background: rgba(59, 130, 246, 0.2); border-color: #3b82f6; box-shadow: 0 0 15px rgba(59, 130, 246, 0.3); }
        .pay-card.selected { border-color: #10b981; background: rgba(16, 185, 129, 0.1); }
    </style>
</head>
<body class="font-sans antialiased" onload="checkSession()">

    <div id="loadingOverlay" class="fixed inset-0 z-[100] flex flex-col items-center justify-center bg-slate-950/90 backdrop-blur-md hidden-element">
        <div class="loader mb-4"></div>
        <p id="loadingStatus" class="text-blue-400 font-bold tracking-widest text-[10px] uppercase">Memverifikasi Akun...</p>
    </div>

    <div id="welcomeOverlay" class="fixed inset-0 z-50 flex items-center justify-center bg-slate-950 transition-all duration-700">
        <div class="text-center p-8 max-w-lg">
            <div class="w-20 h-20 bg-blue-600 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-2xl">
                <i class="fa-solid fa-wallet text-3xl text-white"></i>
            </div>
            <h2 class="text-4xl font-black mb-4 tracking-tighter uppercase">Proto Digital</h2>
            <p class="text-gray-400 mb-10 text-sm italic">"Simulasi transaksi digital tanpa batas"</p>
            <button onclick="showLoginModal()" class="bg-blue-600 text-white px-12 py-4 rounded-2xl font-black shadow-xl hover:bg-blue-500 transition-all uppercase text-[10px] tracking-[0.2em]">Masuk Dashboard</button>
        </div>
    </div>

    <div id="loginModal" class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/60 backdrop-blur-md hidden-element">
        <div class="glass w-full max-w-sm p-10 rounded-[3rem] border border-white/10">
            <h3 class="text-xl font-bold text-center mb-8 tracking-widest text-white uppercase italic">Login Simulation</h3>
            <div class="space-y-4">
                <button onclick="startLoginProcess('Google')" class="w-full flex items-center gap-4 bg-white/5 border border-white/10 p-4 rounded-2xl hover:bg-white/10 transition">
                    <img src="https://www.gstatic.com/images/branding/product/1x/gsa_512dp.png" class="w-6 h-6">
                    <span class="text-[10px] font-black uppercase tracking-widest">Connect with Google</span>
                </button>
                <button onclick="startLoginProcess('Facebook')" class="w-full flex items-center gap-4 bg-blue-600/10 border border-blue-600/20 p-4 rounded-2xl hover:bg-blue-600/20 transition">
                    <i class="fa-brands fa-facebook text-blue-500 text-2xl"></i>
                    <span class="text-[10px] font-black uppercase tracking-widest">Connect with Facebook</span>
                </button>
            </div>
        </div>
    </div>

    <div id="mainContent" class="hidden-element">
        <nav class="sticky top-0 z-40 border-b border-white/10 glass px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-black italic tracking-tighter uppercase"><span class="text-blue-500">Proto</span>Pay</h1>
            <div class="flex items-center gap-4">
                <span id="userBadge" class="bg-white/5 border border-white/10 px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest text-blue-400"></span>
                <button onclick="simulateLogout()" class="text-red-500 hover:text-red-400"><i class="fa-solid fa-power-off"></i></button>
            </div>
        </nav>

        <main class="container mx-auto px-6 py-10 grid lg:grid-cols-2 gap-10">
            <div class="glass p-8 rounded-[2.5rem] border border-white/10">
                <div class="flex gap-2 p-1.5 glass rounded-2xl mb-8 border-white/10">
                    <button onclick="switchService(this, 'pulsa')" class="service-tab active-tab flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest">PULSA</button>
                    <button onclick="switchService(this, 'data')" class="service-tab flex-1 py-3 rounded-xl text-[9px] font-black uppercase tracking-widest text-gray-500">PAKET DATA</button>
                </div>

                <div class="space-y-6">
                    <div class="grid grid-cols-4 gap-2">
                        <div onclick="selectOperator(this, 'Telkomsel')" class="op-card glass p-3 rounded-xl cursor-pointer border border-white/5 flex flex-col items-center transition-all">
                            <i class="fa-solid fa-tower-cell text-red-500 mb-1"></i><span class="text-[8px] font-bold">T-SEL</span>
                        </div>
                        <div onclick="selectOperator(this, 'Indosat')" class="op-card glass p-3 rounded-xl cursor-pointer border border-white/5 flex flex-col items-center transition-all">
                            <i class="fa-solid fa-tower-broadcast text-yellow-500 mb-1"></i><span class="text-[8px] font-bold">ISAT</span>
                        </div>
                        <div onclick="selectOperator(this, 'XL')" class="op-card glass p-3 rounded-xl cursor-pointer border border-white/5 flex flex-col items-center transition-all">
                            <i class="fa-solid fa-signal text-blue-400 mb-1"></i><span class="text-[8px] font-bold">XL Axiata</span>
                        </div>
                        <div onclick="selectOperator(this, 'QRIS')" class="op-card glass p-3 rounded-xl cursor-pointer border border-white/5 flex flex-col items-center transition-all">
                            <i class="fa-solid fa-qrcode text-indigo-400 mb-1"></i><span class="text-[8px] font-bold">Lainnya</span>
                        </div>
                    </div>

                    <input type="number" id="phoneInput" placeholder="08xxxxxxxxxx" class="w-full bg-white/5 border border-white/10 rounded-2xl px-6 py-4 text-white text-xl outline-none focus:ring-2 focus:ring-blue-500 transition">

                    <div id="nominalGrid" class="grid grid-cols-2 gap-4"></div>

                    <div class="pt-6 border-t border-white/5">
                        <label class="text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-4 block">Metode Pembayaran</label>
                        <div class="grid grid-cols-2 gap-3">
                            <div onclick="selectPayment(this, 'QRIS')" class="pay-card glass p-4 rounded-2xl cursor-pointer border border-white/5 flex items-center gap-3 transition-all">
                                <i class="fa-solid fa-qrcode text-indigo-400"></i><span class="text-[10px] font-bold">QRIS</span>
                            </div>
                            <div onclick="selectPayment(this, 'GoPay/Dana')" class="pay-card glass p-4 rounded-2xl cursor-pointer border border-white/5 flex items-center gap-3 transition-all">
                                <i class="fa-solid fa-wallet text-orange-400"></i><span class="text-[10px] font-bold">E-Wallet</span>
                            </div>
                            <div onclick="selectPayment(this, 'Bank BCA')" class="pay-card glass p-4 rounded-2xl cursor-pointer border border-white/5 flex items-center gap-3 transition-all">
                                <i class="fa-solid fa-building-columns text-blue-400"></i><span class="text-[10px] font-bold">VA BCA</span>
                            </div>
                            <div onclick="selectPayment(this, 'Bank Mandiri')" class="pay-card glass p-4 rounded-2xl cursor-pointer border border-white/5 flex items-center gap-3 transition-all">
                                <i class="fa-solid fa-building-columns text-yellow-500"></i><span class="text-[10px] font-bold">VA Mandiri</span>
                            </div>
                        </div>
                    </div>

                    <button onclick="handlePay()" class="w-full bg-blue-600 py-5 rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-2xl active:scale-95 transition-all">Bayar Sekarang</button>
                </div>
            </div>

            <div class="glass p-8 rounded-[2.5rem] border border-white/10">
                <div class="flex justify-between items-center mb-8 text-blue-400 font-black text-[10px] tracking-[0.3em] uppercase">
                    <span>Transaksi Terakhir</span>
                    <button onclick="clearHistory()" class="text-red-400 opacity-50 hover:opacity-100">Reset</button>
                </div>
                <div id="logContainer" class="space-y-4"></div>
            </div>
        </main>
    </div>

    <script>
        const products = {
            pulsa: [{name:'Pulsa 10K', price:'10.200', val:'10K'}, {name:'Pulsa 50K', price:'49.850', val:'50K'}],
            data: [{name:'Data 5GB', price:'35.000', val:'5GB'}, {name:'Data 10GB', price:'62.000', val:'10GB'}]
        };

        let currentService = 'pulsa';
        let selectedOP = "";
        let selectedProduct = null;
        let selectedPayment = "";

        function startLoginProcess(provider) {
            document.getElementById('loginModal').classList.add('hidden-element');
            document.getElementById('loadingOverlay').classList.remove('hidden-element');
            const statusText = document.getElementById('loadingStatus');
            setTimeout(() => { statusText.innerText = `Mengambil Data ${provider}...`; }, 1000);
            setTimeout(() => {
                localStorage.setItem('proto_user', provider);
                document.getElementById('loadingOverlay').classList.add('hidden-element');
                checkSession();
            }, 3000);
        }

        function checkSession() {
            const user = localStorage.getItem('proto_user');
            if (user) {
                document.getElementById('welcomeOverlay').classList.add('hidden-element');
                document.getElementById('mainContent').classList.remove('hidden-element');
                document.getElementById('userBadge').innerText = "Account: " + user;
                renderNominals('pulsa');
                renderHistory();
            }
        }

        function switchService(btn, type) {
            document.querySelectorAll('.service-tab').forEach(t => { t.classList.remove('active-tab', 'text-white'); t.classList.add('text-gray-500'); });
            btn.classList.add('active-tab', 'text-white'); btn.classList.remove('text-gray-500');
            currentService = type;
            renderNominals(type);
        }

        function renderNominals(type) {
            const grid = document.getElementById('nominalGrid');
            grid.innerHTML = products[type].map(p => `
                <div onclick="selectProduct(this, '${p.name}', '${p.price}')" class="product-item glass p-5 rounded-2xl cursor-pointer border border-white/5 hover:border-blue-500 transition-all text-center">
                    <p class="font-black text-2xl">${p.val}</p>
                    <p class="text-blue-400 text-[9px] font-black uppercase tracking-tighter mt-1">Rp ${p.price}</p>
                </div>
            `).join('');
            selectedProduct = null;
        }

        function selectProduct(el, name, price) {
            document.querySelectorAll('.product-item').forEach(i => i.classList.remove('border-blue-500', 'bg-blue-600/10'));
            el.classList.add('border-blue-500', 'bg-blue-600/10');
            selectedProduct = { name, price };
        }

        function selectOperator(el, op) {
            document.querySelectorAll('.op-card').forEach(c => c.classList.remove('active-tab'));
            el.classList.add('active-tab');
            selectedOP = op;
        }

        function selectPayment(el, method) {
            document.querySelectorAll('.pay-card').forEach(c => c.classList.remove('selected'));
            el.classList.add('selected');
            selectedPayment = method;
        }

        function handlePay() {
            const phone = document.getElementById('phoneInput').value;
            if(!phone || !selectedOP || !selectedProduct || !selectedPayment) return alert("Lengkapi Data & Pilih Pembayaran!");

            const trx = {
                id: 'TRX-' + Date.now().toString().slice(-6),
                phone, op: selectedOP, ...selectedProduct,
                payment: selectedPayment,
                date: new Date().toLocaleTimeString()
            };

            let logs = JSON.parse(localStorage.getItem('proto_logs')) || [];
            logs.unshift(trx);
            localStorage.setItem('proto_logs', JSON.stringify(logs));
            alert(`Transaksi Berhasil via ${selectedPayment}!`);
            renderHistory();
        }

        function renderHistory() {
            const container = document.getElementById('logContainer');
            const logs = JSON.parse(localStorage.getItem('proto_logs')) || [];
            if(logs.length === 0) return container.innerHTML = '<p class="text-center py-10 text-gray-700 text-[10px] font-black">EMPTY HISTORY</p>';
            
            container.innerHTML = logs.map(l => `
                <div class="glass p-5 rounded-3xl border-white/5 flex justify-between items-center">
                    <div>
                        <p class="text-[8px] font-black text-blue-500 uppercase tracking-[0.2em] mb-1">${l.id} â€¢ ${l.payment}</p>
                        <p class="text-xs text-gray-500 font-bold">${l.op} | ${l.phone}</p>
                        <p class="text-lg font-black italic uppercase">${l.name}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-xs font-black text-white">Rp ${l.price}</p>
                        <p class="text-[8px] font-bold text-green-400 mt-1 uppercase">Success</p>
                    </div>
                </div>
            `).join('');
        }

        function showLoginModal() { document.getElementById('loginModal').classList.remove('hidden-element'); }
        function simulateLogout() { localStorage.clear(); location.reload(); }
        function clearHistory() { if(confirm("Hapus history?")) { localStorage.removeItem('proto_logs'); renderHistory(); } }
    </script>
</body>
</html>
